# autokube.yaml - Configuración del entorno Kubernetes local
#
# Copia este fichero a autokube.yaml y personaliza según necesidades.
# Los valores mostrados son los valores por defecto.

cluster:
  name: autokube
  # Si false, autokube no crea cluster Kind y usa un cluster Kubernetes existente.
  create: true
  # Contexto de kubeconfig para el cluster externo (solo si create: false).
  # Si vacío, usa el contexto actual (kubectl config current-context).
  context: ""

network:
  # Dominio base para acceso a servicios. Usa nip.io para resolución DNS automática.
  baseDomain: "127.0.0.1.nip.io"
  # Puertos del host mapeados al cluster. Requieren privilegios si < 1024.
  httpPort: 80
  httpsPort: 443

ssl:
  # Generar certificados autofirmados para HTTPS
  enabled: true
  # Instalar la CA en el trust store del sistema (requiere sudo)
  trustCA: false

gitops:
  # Si true, ArgoCD gestiona los componentes desde un repo Git remoto.
  # Si false, los componentes se instalan imperativamente con Helm.
  enabled: true
  # URL del repositorio Git con la estructura gitops/ (REQUERIDO si gitops.enabled)
  repoURL: ""
  # Branch o tag del repositorio
  targetRevision: "main"
  # Path dentro del repo donde están las Application CRs
  path: "gitops/apps"

components:
  argocd:
    enabled: true
  vault:
    enabled: true
  eso:
    enabled: true
  kgateway:
    enabled: true
  sonarqube:
    enabled: true
  kyverno:
    enabled: true
  arc:
    # Self-hosted runners de GitHub Actions en el cluster.
    # Requiere un PAT de GitHub almacenado en Vault (ver README).
    # Lista de repos para los que se crean runners (máx. 4, nivel de repo).
    repos: []
    # repos:
    #   - name: mi-repo
    #     url: "https://github.com/mi-org/mi-repo"
    #   - name: otro-repo
    #     url: "https://github.com/mi-org/otro-repo"
  metallb:
    # LoadBalancer para clusters sin cloud provider (bare-metal/VMs).
    # No es necesario en Kind (usa NodePort).
    enabled: false
    # Rango de IPs para asignar a Services LoadBalancer (REQUERIDO si enabled).
    # Ejemplo: "192.168.1.240-192.168.1.250"
    addressRange: ""

persistence:
  # Directorio para datos persistentes (Vault, SonarQube, PVs).
  # Paths relativos se resuelven respecto al directorio de autokube.
  dataDir: "./data"
